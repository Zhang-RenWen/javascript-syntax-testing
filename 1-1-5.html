<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./public/favicon.ico" />
    <meta http-equiv="cache-control" content="no-cache" />
    <title></title>
    <link rel="stylesheet" href=" https://necolas.github.io/normalize.css/8.0.1/normalize.css" />
    <link rel="stylesheet" href="./hightlight/default.min.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/copybutton.css" />
    <link rel="stylesheet" href="./css/hightlight.css" />
    <script src="./hightlight/hightlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BEVZJDBC7Z"></script>
    <script src="./js/gtag.js"></script>
  </head>

  <body>
    <header>
      <nav>
        <h1>
          <span id="toggle-menu"></span>
          <a href="index.html"></a>
        </h1>
      </nav>
    </header>
    <main>
      <aside>
        <nav></nav>
      </aside>
      <article>
        <h2 id="1-1-5">1-1-5 現代 CSS 特色</h2>
        <h3>CSS 變數和主題切換優雅實現</h3>
        <p>
          CSS 變數時代確實已經到來。注意，這裡所說的不是CSS 前置處理器（類似
          Less、Sass）中的變數，而是實實在在地原生支援特性。
        </p>
        <pre><code class="language-css">
main {
  background: white;
  color: #555;
}
a,
a:link {
  color: #639a67;
}
a:hover {
  color: #205d67;
}
        </code></pre>
        <p>借助 CSS 變數，我們可以對顏色色值進行設定。</p>
        <pre><code class="language-css">
:root {
  --bg: White;
  --text-color: #555;
  --link-color: #639a67;
  --link-hover: #205d67;
}
        </code></pre>
        <p>這樣一來，我們可以直接使用色值來實現程式簡化。</p>
        <pre><code class="language-css">
main {
  background: var (--bg);
  color: var (--text-color);
}
a,
a:link {
  color: var (--link-color);
}
a:hover {
  color: var (--link-hover);
}
        </code></pre>
        <p>
          這一點很好了解，在任何語言中，變數都是個好東西：它可以降低維護成本，甚至實現更好的效能。
        </p>
        <p>
          CSS 變數語法也很簡單：我們使用「--變數名稱」的方式定義變數，使用
          var(--變數名稱)的方式消費變數。
        </p>
        <p>
          CSS變數的相容性「出乎意料」得好，大部分行動端都已經可以使用 CSS 變數，PC
          端的新版本瀏覽器基本也都已經支援該變數。
        </p>
        <p>:root 使用方式是在 html 根節點下定義，並如上面的範例進行變數宣告。</p>
        <p>除了簡單地應用變數，下面介紹一些進階用法。</p>
        <h4>使用CSS變數實現主題切換</h4>
        <p>
          對於一鍵切換主題這一功能，以往的寶現方式較為複雜。如今，借助 CSS
          變數，一切都變得容易起來。參考以下程式。
        </p>
        <pre><code class="language-css">
:root {
  --bg: white;
  --text-color: #555;
}
        </code></pre>
        <p>定義一個，pink-theme 來對應粉色主題，程式如下。</p>
        <pre><code class="language-css">
.pink-theme {
  --bg: hotpink;
  --text-color: white;
}
        </code></pre>
        <p>指定套用的元素。</p>
        <pre><code class="language-css">
main {
  background: var(--bg);
  color: var(--text-color);
}
        </code></pre>
        <p>這樣一來，切換主題就變得非常簡單了，程式如下。</p>
        <pre><code class="language-js">
const toggleBtn = document.querySelector('.toggle-theme')
const main = document.querySelector('main')
toggleBtn.addEventListener('click', (e) => {
  e.preventDefault()
  if (main.classList.contains('pink-theme')) {
    // 目前主題為粉色主題，需要移除 pink-theme class
    main.classList.remove('pink-theme')
    toggleBtn.innerText = '切換為粉色少女主題'
  } else {
    main.classList.add('pink-theme')
    toggleBtn.innerText = '切換正常主題色'
  }
})
        </code></pre>
        <div class="border-block"><button class="toggle-theme">切換為粉色少女主題</button></div>
        <h4>CSS Modules 理論和實戰</h4>
        <p>
          如何維護大型專案的 z-index，如何維護 CSS 選擇器和樣式之間的衝突。是接下來這個單元的重點。
        </p>
        <h4>CSS Modules</h4>
        <p>
          CSS Modules是指，專案中的所有 class 名稱預設都是局部有作用的。 其實，CSS Modules
          並不是一個官方標準，更不是瀏覽器的機制，因為它依賴我們的專案建置過程，因此以它為基礎的實現常常需要借助
          webpack 或其他建置工具可以將 class 名稱唯一化，進一步使其只在局部有作用。
        </p>
        <pre><code class="language-html">
&lt;div class="test"&gt;This is a test&lt;/div&gt;
        </code></pre>
        <p>對應的樣式表如下。</p>
        <pre><code class="language-css">
.test{
  color: red
}
        </code></pre>
        <p>經過編譯建置後，對應的 HTML 程式內容如下所示。</p>
        <pre><code class="language-html">
&lt;div class="_style_test_309571057"&gt;
  This is a test
&lt;/div&gt;
        </code></pre>
        <p>同時，經過編譯建置後，對應的 CSS 程式內容如下所示。</p>
        <pre><code class="language-css">
._style_test_309571057{
  color: red;
}
        </code></pre>
        <p>
          其中，class
          名是動態產生的，在整個專案中這個名字是唯一的。透過命名標準的唯一性，便達到了避免樣式衝突的目的。
        </p>
        <p>
          仔細想來，這樣的解決方案似乎有一個問題：如何實現樣式重複使用？因為產 生了全域唯一的 class
          名，所以我們如何像傳統方式那樣實現樣式重複使用呢？ 從原理上想，全域唯一的 class
          名是在建置過程中產生的，所以如果能夠在建置過程中進行標識，表示該 class
          將被重複使用，就可以解決問題了。
        </p>
        <p>
          這樣的方式需要依靠 composes 關鍵字實現。我們來看一個實際範例。 在專案樣式表 style.css
          檔案中，有以下相關程式。
        </p>
        <pre><code class="language-css">
.common { 
  color: red;
}
.test {
  composes: common; 
  font-size: 18px;
}
        </code></pre>
        <p>注意，這裡使用 composes 關鍵字在 .test 中連結了 .common 樣式。</p>
        <p>專案的HTML 檔案中引用了 style.css檔案，並使用了 CSS Modules特性，程式如下。</p>
        <pre><code class="language-html">
import style from "./style.css"; 
&lt;div class="${style.test}"&gt;
  This is a test
&lt;/div&gt;
        </code></pre>
        <p>以上程式經過編譯建置後，獲得的程式如下。</p>
        <pre><code class="language-html">
&lt;div class="_style__test_0980340_style_common 404840"&gt;
  This is a test 
&lt;/div&gt;
        </code></pre>
        <p>我們看到， div 的 class 中加入了 _style_common_404840 ，這樣就實現了重複使用樣式‧</p>
        <pre><code class="language-css">

        </code></pre>
        <pre><code class="language-css">

        </code></pre>
        <div class="border-block"></div>
      </article>
    </main>
  </body>
  <script type="module" src="./js/main.js"></script>
  <script>
    const toggleBtn = document.querySelector('.toggle-theme')
    const main = document.querySelector('main')
    toggleBtn.addEventListener('click', (e) => {
      e.preventDefault()
      if (main.classList.contains('pink-theme')) {
        // 目前主題為粉色主題，需要移除 pink-theme class
        main.classList.remove('pink-theme')
        toggleBtn.innerText = '切換為粉色少女主題'
      } else {
        main.classList.add('pink-theme')
        toggleBtn.innerText = '切換正常主題色'
      }
    })
  </script>
</html>
<style>
  :root {
    --bg: white;
    --text-color: #000;
  }
  .pink-theme {
    --bg: hotpink;
    --text-color: white;
  }
  main {
    background: var(--bg);
    color: var(--text-color);
  }
</style>
