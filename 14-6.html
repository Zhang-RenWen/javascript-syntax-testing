<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./public/favicon.ico" />
    <meta http-equiv="cache-control" content="no-cache" />
    <title>JavaScript-syntax-testing</title>
    <link rel="stylesheet" href=" https://necolas.github.io/normalize.css/8.0.1/normalize.css" />
    <link rel="stylesheet" href="./hightlight/default.min.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/copybutton.css" />
    <link rel="stylesheet" href="./css/hightlight.css" />
    <script src="./hightlight/hightlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
  </head>

  <body>
    <header>
      <nav>
        <h1>
          <span id="toggle-menu"></span>
          <a href="index.html"></a>
        </h1>
      </nav>
    </header>
    <main>
      <aside>
        <nav></nav>
      </aside>
      <article>
        <h2 id="14-6">14-6 BigInt 類型</h2>
        <p>
          <code><a href="7-1.html">Number.MAX_SAFE_INTEGER</a></code>
          靜態數據屬性表示在 JavaScript 中最大的安全整數(2^53 - 1)
        </p>
        <p>
          新增的
          <code>BigInt</code>
          型別可以用來表示或計算比普通安全整數更大的整數。
        </p>
        <p>表示方式為整數後面加上英文字符n</p>
        <pre><code class="language-js">
let n = 253n
console.log(n,typeof(n))   // 253n 'bigint'  
        </code></pre>
        <p>Number 型別之最大整數計算：</p>
        <pre><code class="language-js">
let max = Number.MAX_SAFE_INTEGER
console.log(max) // 9007199254740991
console.log(max + 1) // 9007199254740992
console.log(max + 2) // 9007199254740992 出問題
      </code></pre>
        <h3>解決辦法</h3>
        <p>BigInt 函數型態可以將普通整數轉換為 BigInt 型別。</p>
        <p>備註： BigInt() 不和 new 一起使用。</p>
        <pre><code class="language-js">
let max = Number.MAX_SAFE_INTEGER
console.log(BigInt(max)) // 9007199254740991n
console.log(BigInt(max) + BigInt(1)) // 9007199254740992n
console.log(BigInt(max) +BigInt(2)) // 9007199254740993n
      </code></pre>
        <p>
          警告： Number 和 BigInt 不能混和計算 —
          他們必須被轉換到同一個型態。然而，在相互轉換時要注意， BigInt 在被轉換成 Number
          時可能會遺失部分精度的資訊。也不能將非整數傳入 BigInt 函式。
        </p>
        <pre><code class="language-js error-code">
BigInt(1.1) // The number 1.1 cannot be converted to a BigInt because it is not an integer

let max = Number.MAX_SAFE_INTEGER
console.log(BigInt(max)+ 2) // TypeError: Cannot mix BigInt and other types, use explicit conversions
      </code></pre>
        <h3>實驗性質: 這是一個實驗中的功能</h3>
        <p>此功能在某些瀏覽器尚在開發中，請參考兼容表格以得到不同瀏覽器用的前輟。</p>

        <h3>細節說明</h3>
        <p>
          <code>BigInt</code>
          是透過在一個數值後加上
          <code>n</code>
          ，例如
          <code>10n</code>
          ，或呼叫
          <code>BigInt()</code>
          所生成的。
        </p>
        <p>
          <code>BigInt</code>
          跟
          <code>Number</code>
          很像，但在某些部分有些許不同 — 它不可以被用在內建的
          <code>Math</code>
          物件方法中、而且不可以跟
          <code>Number</code>
          的實體混用運算子。
        </p>
        <pre><code class="language-js">
const theBiggestInt = 9007199254740991n;

const alsoHuge = BigInt(9007199254740991);
// ↪ 9007199254740991n

const hugeString = BigInt("9007199254740991");
// ↪ 9007199254740991n

const hugeHex = BigInt("0x1fffffffffffff");
// ↪ 9007199254740991n

const hugeBin = BigInt(
  "0b11111111111111111111111111111111111111111111111111111",
);
// ↪ 9007199254740991n
        </code></pre>
        <p>資料來源:</p>
        <p>
          <a
            href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/BigInt#%E7%80%8F%E8%A6%BD%E5%99%A8%E7%9B%B8%E5%AE%B9%E6%80%A7"
          >
            https://developer.mozilla.org/.../BigInt
          </a>
        </p>
        <p>
          <a href="https://www.youtube.com/watch?v=-t5qBDuTB0w&t=1s">
            https://www.youtube.com/watch?v=-t5qBDuTB0w&t=1s
          </a>
        </p>
      </article>
    </main>
  </body>
  <script type="module" src="./js/main.js"></script>
</html>
